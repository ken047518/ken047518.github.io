{{ define "main" }}

<article class="container mx-auto px-4 py-12">
  {{- /* Header */ -}}
  <header class="text-center mb-12">
    <h1 class="font-heading text-4xl md:text-5xl font-bold mb-4">
      {{ .Title }}
    </h1>
    
    <div class="flex flex-wrap justify-center gap-4 text-gray-600 dark:text-gray-400">
      {{- if .Params.location -}}
      <span>
        <i class="fas fa-map-marker-alt mr-1"></i>{{ .Params.location }}
      </span>
      {{- end -}}
      
      <span>
        <i class="fas fa-calendar mr-1"></i>
        <time datetime="{{ .Date.Format "2006-01-02" }}">
          {{ .Date.Format "January 2, 2006" }}
        </time>
      </span>
    </div>
  </header>

  {{- /* Gallery Grid */ -}}
  {{- with .Params.images -}}
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-12">
    {{- range . -}}
      {{- $image := $.Resources.Get . -}}
      {{- if $image -}}
        {{- $thumb := $image.Fill "480x480 Center" -}}
        {{- $thumb2x := $image.Fill "960x960 Center" -}}
        {{- $full := $image.Resize "1920x" -}}
    <a href="{{ $full.Permalink }}" class="block aspect-square overflow-hidden rounded-lg group" data-lightbox="gallery">
      <img 
        src="{{ $thumb.Permalink }}" 
        srcset="{{ $thumb.Permalink }} 1x, {{ $thumb2x.Permalink }} 2x"
        alt="{{ $.Title }}"
        loading="lazy"
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
      >
    </a>
      {{- end -}}
    {{- end -}}
  </div>
  {{- end -}}

  {{- /* Content */ -}}
  {{- with .Content -}}
  <div class="prose prose-lg dark:prose-invert max-w-3xl mx-auto">
    {{ . }}
  </div>
  {{- end -}}

  {{- /* Navigation */ -}}
  <nav class="mt-12 pt-8 border-t border-gray-300 dark:border-gray-700 flex justify-between max-w-3xl mx-auto">
    {{- with .PrevInSection -}}
    <a href="{{ .Permalink }}" class="text-primary hover:underline">
      <i class="fas fa-arrow-left mr-2"></i>{{ .Title }}
    </a>
    {{- else -}}
    <span></span>
    {{- end -}}
    
    {{- with .NextInSection -}}
    <a href="{{ .Permalink }}" class="text-primary hover:underline">
      {{ .Title }}<i class="fas fa-arrow-right ml-2"></i>
    </a>
    {{- end -}}
  </nav>
</article>

{{ end }}
