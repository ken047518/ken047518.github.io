{{ define "main" }}

<div class="container mx-auto px-4 py-12">
  <header class="text-center mb-12">
    <h1 class="font-heading text-4xl md:text-5xl font-bold mb-4">
      {{ .Title }}
    </h1>
    {{- with .Description -}}
    <p class="text-xl text-gray-600 dark:text-gray-400">{{ . }}</p>
    {{- end -}}
  </header>

  {{- $posts := .Pages -}}
  {{- if $posts -}}
  <div class="space-y-8">
    {{- /* First post - Featured large card */ -}}
    {{- $first := index $posts 0 -}}
    <article class="group">
      <a href="{{ $first.Permalink }}" class="flex flex-col md:flex-row gap-6 bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow">
        {{- with $first.Params.image -}}
          {{- $image := $first.Resources.Get . -}}
          {{- if $image -}}
            {{- $thumb := $image.Fill "960x720 Center" -}}
            {{- $thumb2x := $image.Fill "1440x1080 Center" -}}
        <div class="md:w-1/2 aspect-[4/3] overflow-hidden">
          <img 
            src="{{ $thumb.Permalink }}" 
            srcset="{{ $thumb.Permalink }} 1x, {{ $thumb2x.Permalink }} 2x"
            alt="{{ with $first.Params.image_alt }}{{ . }}{{ else }}{{ $first.Title }}{{ end }}"
            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
          >
        </div>
          {{- end -}}
        {{- end -}}
        
        <div class="md:w-1/2 p-6 md:p-8 flex flex-col justify-center">
          <h2 class="font-heading font-bold text-2xl md:text-3xl mb-4 group-hover:text-primary transition-colors">
            {{ $first.Title }}
          </h2>
          
          <div class="flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4">
            {{- if $first.Params.location -}}
            <span>
              <i class="fas fa-map-marker-alt mr-1"></i>{{ $first.Params.location }}
            </span>
            {{- end -}}
            <span>
              <time datetime="{{ $first.Date.Format "2006-01-02" }}">
                {{ $first.Date.Format "January 2, 2006" }}
              </time>
            </span>
          </div>
          
          {{- with $first.Summary -}}
          <p class="text-gray-600 dark:text-gray-400 line-clamp-3">
            {{ . | plainify }}
          </p>
          {{- end -}}
        </div>
      </a>
    </article>

    {{- /* Remaining posts - Grid layout */ -}}
    {{- if gt (len $posts) 1 -}}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      {{- range after 1 $posts -}}
        {{ partial "grid-card.html" . }}
      {{- end -}}
    </div>
    {{- end -}}
  </div>
  {{- else -}}
  <p class="text-center text-gray-600 dark:text-gray-400">
    {{ if eq .Language.Lang "zh-tw" }}目前沒有文章{{ else }}No posts yet{{ end }}
  </p>
  {{- end -}}
</div>

{{ end }}
